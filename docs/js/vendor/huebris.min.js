const huebris={huebrisDefaults:{black:"black",white:"white",tintSteps:4,toneSteps:4,shadeSteps:4,alphaSteps:4,globalSteps:0,utilityClasses:!0,outputMode:"steps",colorMode:"srgb",hueMode:"shorter",debug:!1},stepOptions:{2:[67,33],3:[75,50,25],4:[80,60,40,20],5:[84,67,50,33,16],6:[86,71,57,43,29,14]},huebrisConfig:{},baseColors:{},generatedVars:{},startTime:null,setConfig(e,s){const t=document.querySelector(e);if(!t)return console.error(`huebris: could not find element "${e}"`),!1;const i=getComputedStyle(t),o=(e,s)=>{const t=i.getPropertyValue(`--huebrisconf-${e}`).trim().replace(/^['"]|['"]$/g,"");return""!==t?t:s},r=this.huebrisDefaults;if(this.huebrisConfig={CSSElement:e,element:t,variablePrefix:s,black:o("black",r.black),white:o("white",r.white),tintSteps:parseInt(o("tint-steps",r.tintSteps)),toneSteps:parseInt(o("tone-steps",r.toneSteps)),shadeSteps:parseInt(o("shade-steps",r.shadeSteps)),alphaSteps:parseInt(o("alpha-steps",r.alphaSteps)),globalSteps:parseInt(o("global-steps",r.globalSteps)),utilityClasses:"true"===o("utility-classes",String(r.utilityClasses)),outputMode:o("output-mode",r.outputMode),colorMode:o("color-mode",r.colorMode),hueMode:o("hue-mode",r.hueMode),debug:"true"===o("debug",String(r.debug))},this.huebrisConfig.globalSteps>0){const e=this.huebrisConfig.globalSteps;this.huebrisConfig.tintSteps=e,this.huebrisConfig.toneSteps=e,this.huebrisConfig.shadeSteps=e,this.huebrisConfig.alphaSteps=e}const n=[0,2,3,4,5,6];["tintSteps","toneSteps","shadeSteps","alphaSteps"].forEach((e=>{n.includes(this.huebrisConfig[e])||(console.warn(`huebris: invalid ${e} value "${this.huebrisConfig[e]}" â€” must be 0 or 2-6. Falling back to ${r[e]}.`),this.huebrisConfig[e]=r[e])}));const a=["hsl","hwb","lch","oklch","lab","oklab"].some((e=>this.huebrisConfig.colorMode.includes(e)));return this.huebrisConfig.mixMode=a?`in ${this.huebrisConfig.colorMode} ${this.huebrisConfig.hueMode} hue`:`in ${this.huebrisConfig.colorMode}`,this.huebrisConfig.debug&&console.log("huebris config:",this.huebrisConfig),!0},discoverColors(e){this.baseColors={};const s=`--${e}-`;for(const e of document.styleSheets){let t;try{t=e.cssRules}catch(s){this.huebrisConfig.debug&&console.warn("huebris: skipping cross-origin stylesheet",e.href);continue}for(const e of t)if(e.selectorText===this.huebrisConfig.CSSElement)for(const t of e.style){if(!t.startsWith(s))continue;const i=t.slice(s.length),o=e.style.getPropertyValue(t).trim();this.baseColors[i]=o}}0===Object.keys(this.baseColors).length&&console.warn(`huebris: no color variables found with prefix "${s}" on "${this.huebrisConfig.CSSElement}"`),this.huebrisConfig.debug&&console.log("huebris baseColors:",this.baseColors)},addGrey(){this.generatedVars.grey=`color-mix( ${this.huebrisConfig.mixMode}, var(--black) 50%, var(--white) 50% )`},setTintToneShadeSteps(){},setAlphaSteps(){},addVariations(e,s){const t={tint:"var(--white)",tone:"var(--grey)",shade:"var(--black)",alpha:"transparent"},i=this.huebrisConfig.mixMode,o=this.stepOptions[s],r=this.huebrisConfig.outputMode,n=(e,s,t,i)=>{switch(r){case"value":return`${e}-${s}${i}`;case"compact":return`${e[0]}${s[0]}${t}`;default:return`${e}-${s}${t}`}},a=(s,o)=>`color-mix( ${i}, var(--${s}) ${o}%, ${t[e]} ${100-o}% )`;if("alpha"===e){["black","white","grey",...Object.keys(this.baseColors),...Object.keys(this.generatedVars)].forEach((e=>{o.forEach(((s,t)=>{const i=n(e,"alpha",t+1,s);this.generatedVars[i]=a(e,s)}))}))}else{const s=Object.keys(this.baseColors);"tone"!==e&&s.push("grey"),s.forEach((s=>{o.forEach(((t,i)=>{const o=n(s,e,i+1,t);this.generatedVars[o]=a(s,t)}))}))}this.huebrisConfig.debug&&console.log(`huebris addVariations [${e}]:`,this.generatedVars)},writeCSS(){const e=this.huebrisConfig.CSSElement,s={black:this.huebrisConfig.black,white:this.huebrisConfig.white,...Object.fromEntries(Object.entries(this.baseColors).map((([e,s])=>[e,s]))),...this.generatedVars};let t=`${e} {\n${Object.entries(s).map((([e,s])=>`    --${e}: ${s};`)).join("\n")}\n}\n`;if(this.huebrisConfig.utilityClasses){t+=`\n${Object.keys(s).map((e=>[`.${e} { background-color: var(--${e}); }`,`.${e}-text { color: var(--${e}); }`].join("\n"))).join("\n")}\n`}const i=document.getElementById("--huebris-styles");i&&i.remove();const o=document.createElement("style");o.id="--huebris-styles",o.textContent=t,document.head.appendChild(o),this.huebrisConfig.debug&&console.log("huebris writeCSS:\n",t)},getPalette(e="str"){const s=this.generatedVars,t=(e,t)=>Object.keys(s).filter((s=>"alpha"===t?s.match(new RegExp(`^${e}-alpha\\d+$`)):s.match(new RegExp(`^${e}-${t}\\d+$`)))).sort(),i=(e,s="large",t=null)=>`<div class="huebris-swatch huebris-swatch--${s}" style="background-color: var(--${e})" title="--${e}">\n                <span class="huebris-swatch__label">${t??e}</span>\n            </div>`,o=e=>`<div class="huebris-row">\n                ${e.map((e=>{const t=(o=e,Object.keys(s).filter((e=>e.match(new RegExp(`^${o}-alpha\\d+$`)))).sort());var o;return`<div class="huebris-col">\n                        ${i(e,"large")}\n                        ${t.map((e=>i(e,"small"))).join("")}\n                    </div>`})).join("")}\n            </div>`,r=["black","white","grey",...Object.keys(this.baseColors)].map((e=>{const s=t(e,"alpha"),r=t(e,"tint"),n=t(e,"tone"),a=t(e,"shade");return`<div class="huebris-card">\n                <div class="huebris-card__header">--${e}</div>\n                <div class="huebris-card__base">${i(e,"large")}</div>\n                ${s.length?(e=>`<div class="huebris-row huebris-row--alpha">\n                ${e.map((e=>i(e,"large"))).join("")}\n            </div>`)(s):""}\n                ${r.length?o(r):""}\n                ${n.length?o(n):""}\n                ${a.length?o(a):""}\n            </div>`})),n="<style>\n            .huebris-palette { font-family: monospace; font-size: 11px; display: flex; flex-direction: column; gap: 24px; padding: 16px; background: #111; color: #eee; }\n            .huebris-card { border: 1px solid #333; padding: 8px; }\n            .huebris-card__header { padding: 4px 0 8px; font-weight: bold; }\n            .huebris-card__base { margin-bottom: 8px; }\n            .huebris-row { display: flex; gap: 8px; margin-bottom: 8px; }\n            .huebris-col { display: flex; flex-direction: column; gap: 4px; }\n            .huebris-swatch { border: 1px solid #444; display: flex; align-items: flex-start; padding: 4px; box-sizing: border-box; }\n            .huebris-swatch--large { width: 90px; height: 90px; }\n            .huebris-swatch--small { width: 90px; height: 20px; }\n            .huebris-swatch__label { background: rgba(0,0,0,.5); color: #fff; font-size: 9px; padding: 1px 3px; line-height: 1.2; word-break: break-all; }\n        </style>",a=`${n}<div class="huebris-palette">${r.join("")}</div>`;return"obj"===e?{cards:r,styles:n}:a},showPalette(e){e?e.innerHTML=this.getPalette("str"):console.error("huebris: showPalette requires a valid HTML element")},init(e="html",s="huebris"){this.startTime=Date.now(),this.huebrisDefaults.debug&&console.log("Starting huebris.js...");this.setConfig(e,s)&&(this.huebrisConfig.debug&&console.log("Starting huebris.js..."),this.discoverColors(s),this.addGrey(),this.huebrisConfig.tintSteps>0&&this.addVariations("tint",this.huebrisConfig.tintSteps),this.huebrisConfig.toneSteps>0&&this.addVariations("tone",this.huebrisConfig.toneSteps),this.huebrisConfig.shadeSteps>0&&this.addVariations("shade",this.huebrisConfig.shadeSteps),this.huebrisConfig.alphaSteps>0&&this.addVariations("alpha",this.huebrisConfig.alphaSteps),this.writeCSS(),this.huebrisConfig.debug&&(console.log("huebris generatedVars:",this.generatedVars),console.log(`huebris done in ${Date.now()-this.startTime}ms`)))}};